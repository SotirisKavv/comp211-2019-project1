# Δομές Δεδομένων και Αρχεία

# Άσκηση 1η: Επεξεργασία Αρχείων – Εξωτερική Ταξινόμηση

Μέρος 1ο: Αρχικά δημιουργείται ένα αρχείο. Στη συνέχεια, μέσω ενός
buffer 100 0 ακεραίων και βρόχων επανάληψης, αρχικοποιείται το αρχείο
με 100000 τυχαίους ακέραιους αριθμούς. Αυτό επιτυγχάνεται ως εξής:
πρώτα καταγράφονται οι 1000 τυχαίοι αριθμοί (με άνω όριο τον αριθμό
1000000 ), οι οποίοι και περιέχονται στον buffer, στη θέση του αρχείου
που έχουμε υποδείξει μέσω της παραμέτρου offset, και ύστερα
αυξάνεται η τιμή της offset ώστε να επαναληφθεί η διαδικασία στην
επόμενη θέση του αρχείου.

Μέρος 2ο: Αρχικά, μέσω του buffer των 1000 ακεραίων, αρχικοποιούμε
10 πίνακες 10000 ακεραίων, διαιρώντας μ’ αυτόν τον τρόπο το αρχικό
αρχείο σε 10 μικρότερα. Αυτή η διαδικασία γίνεται μέσω επαναλήψεων:
«διαβάζονται» οι πρώτοι 1000 αριθμοί του αρχικού αρχείου και στη
συνέχεια τοποθετούνται στις πρώτες 1000 θέσεις του πίνακα των 10000
ακεραίων. Η διαδικασία επαναλαμβάνεται μέχρι να καλυφθούν όλες οι
θέσεις του τελευταίου πίνακα. Όταν επιτευχθεί αυτό, γίνεται η
ταξινόμησή των 10000 ακεραίων με τη χρήση του αλγόριθμου `heap sort`:

- Πρώτα κατασκευάζεται ο σωρός που βασίζεται στον πίνακα και μ’
    αυτόν τον τρόπο, στη ρίζα βρίσκεται ο μέγιστος αριθμός.
- Το στοιχείο που βρίσκεται στη ρίζα του σωρού, τοποθετείται στο
    τέλος του πίνακα.
- Στην κενή θέση πλέον, τοποθετείται το αμέσως επόμενο μέγιστο
    στοιχείο (δηλαδή το δεξιότερο στοιχείο του τελευταίου επιπέδου)
    και επαναλαμβάνουμε τη διαδικασία μέχρι να έχουν ταξινομηθεί
    όλα τα στοιχεία.

Μόλις ολοκληρωθεί η ταξινόμηση του πίνακα των 10000 ακεραίων, τότε
με τη βοήθεια του buffer φορτώνουμε σ’ αυτόν τα πρώτα 1000 στοιχεία
του πίνακα και τελικά τα εγγράφουμε σε ένα καινούργιο αρχείο. Η
παραπάνω διαδικασία επαναλαμβάνεται μέχρι να χωριστούν οι αρχικοί
αριθμοί σε 10 καινούργια αρχεία και ταξινομηθούν μέσα σ’ αυτά.


Ολοκληρώνοντας το 2ο μέρος, φορτώνουμε τα πρώτα 1000 στοιχεία των
10 αρχείων σε 10 buffers, και συγκρίνοντας μεταξύ τους τα πρώτα
στοιχεία των buffer, τοποθετούμε το μικρότερο στην πρώτη θέση ενός
11 ου buffer. Η διαδικασία επαναλαμβάνεται ταξινομώντας 1000 στοιχεία.
Μόλις γεμίσει ο πρώτος buffer, εγγράφονται τα στοιχεία του σε ένα
καινούργιο αρχείο. Αυτό επαναλαμβάνεται μέχρι να εγγραφθούν
συνολικά 100000 ακέραιοι. Όταν παίρνουμε έναν αριθμό από έναν
buffer, όταν θα τον ξαναψάξουμε ψάχνοντας τον αμέσως επόμενο
μικρότερο αριθμό, θα «κοιτάξουμε» στην επόμενη θέση του buffer. Όταν
φτάσουμε στην τελευταία θέση του buffer, φορτώνουμε σ’ αυτόν τα
επόμενα 1000 στοιχεία του αντίστοιχου αρχείου. Όταν έχουμε
τοποθετήσει όλους τους αριθμούς ενός αρχείου, αυτό διαγράφεται και
δεν το ξαναψάχνουμε.

3 ο Μέρος: Σ’ αυτό το μέρος εκτελούνται δύο τρόποι αναζήτησης 40 στο
σύνολο αριθμών (20 που υπάρχουν και 20 που δεν) στο τελικό
(ταξινομημένο) αρχείο: `η σειριακή και η δυαδική αναζήτηση`.

- Στη σειριακή αναζήτηση, φορτώνουμε τους πρώτους 1000
    αριθμούς του αρχείου σε έναν buffer. Στη συνέχεια αναζητούμε σ’
    αυτόν αν υπάρχει ο αριθμός που ψάχνουμε. Αν υπάρχει τότε
    έχουμε επιτυχή αναζήτηση. Αν όχι, φορτώνουμε τα επόμενα 1000
    στοιχεία. Αν δε βρεθεί ο αριθμός μέσα στο αρχείο, τότε έχουμε
    ανεπιτυχή αναζήτηση και την τερματίζουμε.
- Στη δυαδική αναζήτηση, φορτώνουμε τους μεσαίους 1000
    αριθμούς του αρχείου σε έναν buffer. Αν δε βρεθεί, τότε:
       o Αν ο αριθμός είναι μικρότερος του πρώτου αριθμού του
          buffer, εφαρμόζουμε την ίδια διαδικασία για τα στοιχεία
          ανάμεσα στο πρώτο του αρχείου και το μικρότερο του
          buffer.
       o Αν ο αριθμός είναι μεγαλύτερος του μεγαλύτερου στοιχείου
          του buffer, τότε εφαρμόζουμε την ίδια διαδικασία για τα
          στοιχεία ανάμεσα στο μεγαλύτερο το buffer και του
          τελευταίου του αρχείου.
    Αν ο αριθμός βρεθεί, έχουμε επιτυχία. Διαφορετικά έχουμε
    αποτυχία.

4 ο Μέρος: 

Τα αποτελέσματα του παραπάνω κώδικα είναι τα αναμενόμενα:

```
- 100 προσπελάσεις γίνονται για την εγγραφή των 10000 0
    ακεραίων χρήσει buffer 100 0 ακεραίων.
- 200 προσπελάσεις στο δίσκο γίνονται για την ανάγνωση και
    την εγγραφή των 100000 στοιχείων σε 10 αρχεία (100 για
    ανάγνωση και 100 για εγγραφή) και άλλες τόσες για τη
    συγχώνευσή τους σε ένα αρχείο. Άρα σύνολο 400
    προσπελάσεις στο δίσκο.
- Θα ‘ταν πιο σωστό να επιβεβαιώσουμε την απόδοση ενός
    αλγόριθμου αναζήτησης από την αναζήτηση ενός αριθμού
    που δεν υπάρχει στη λίστα, καθώς τότε έχουν ελεγχθεί όλα
    τα πιθανά μέρη της λίστας ώστε να βρεθεί ένα στοιχείο
    (worst case scenario). Οπότε έχουμε τα αναμενόμενα
    αποτελέσματα:
       o 100 προσπελάσεις με τη σειριακή αναζήτηση (αφού
          ψάχνουμε όλη τη λίστα, ένα-ένα τα στοιχεία)
       o 7 προσπελάσεις (η δυαδική αναζήτηση έχει
          πολυπλοκότητα Ο(log(n), δηλαδή για μία αναζήτηση
          στο αρχείο χρειάζονται log 100 βήματα = 6.6 ≈ 7 ).
```

# Πηγές

 • https://www.geeksforgeeks.org/heap-sort/

 • https://en.wikipedia.org/wiki/Heapsort

 • Σημειώσεις Μαθήματος